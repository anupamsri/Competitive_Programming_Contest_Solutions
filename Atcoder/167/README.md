#C

ビット全探索  
二択の場合は二進数で全通りを考える

#D

ループに着目  
同じ場所が出てくるまで探索  
試行回数がループに入る以前に終わる場合に注意
